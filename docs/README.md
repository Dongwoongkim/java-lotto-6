# 🚩프로그래밍 요구사항 및 2주차 피드백

### 1. indent(인덴트, 들여쓰기) depth를 3이 넘지 않도록 구현한다.

- ex) while문 안에 if문이 있는경우 depth는 2이다.
- 메소드 분리에 신경쓰기.

### 2. 3항 연산자를 쓰지 않는다.

- ex) return a > b ? a : b;

### 3. 메소드 하나의 길이가 15라인을 넘어가지 않도록 구현한다.

- 메소드가 한 가지 일만 하도록 구현하기

### 4. JUnit 5와 AssertJ를 이용하여 본인이 정리한 기능 목록이 정상 동작함을 테스트 코드로 작성하여 확인한다.

### 5. else 사용 금지

### 6. Enum을 활용한다.

### 7. 도메인의 단위 테스트 반드시 구현한다.

### 8. 핵심 로직과 UI 담당 로직을 분리하자. (MVC패턴)

### 9. 제공된 Lotto 클래스 활용

- numbers 접근제어자 변경 불가
- 필드 추가 불가
- 패키지 변경은 가능

### 10. 변수 이름에 자료형 사용 불가능

- ex) String carNameList → carNames

### 11. 값을 하드코딩하지 않도록 할 것

- 매직넘버는 static final 상수로 사용

### 12. 작은단위 → 큰단위로 테스트 코드를 작성할 것.

### 13. README를 상세히 기록할 것.

### 14. 기능목록을 자주 재검토 및 업데이트 할 것

### 15. 클래스는 상수, 멤버변수, 생성자, 메소드 순으로 작성할 것.

---

# 🚩구현 기능 목록

## 💡View

## 📝 입력

#### 1. 구매할 로또의 금액

    - Console.readLine()을 사용하여 String을 반환한다.

- 입력한 값을 검증기에 위임하여 값의 유효성을 검증한다.

#### 2. 당첨 번호 6자리

    - Console.readLine()을 사용하여 String을 반환한다.

- 입력한 값을 검증기에 위임하여 값의 유효성을 검증한다.

#### 3. 보너스 넘버

    - Console.readLine()을 사용하여 String을 반환한다.

- 입력한 값을 검증기에 위임하여 값의 유효성을 검증한다.
- 추가적으로 당첨번호에 포함된 값을 입력 시 <u>throw IllegalArgumentException을 상속 받아 만든 명시적인 예외</u>를 던지고 예외메시지를 출력한 이후 재입력을 받는다.

## 🖨️ 출력

#### 1. 사용자가 구매하는 로또의 금액에 대한 안내문 출력 기능

    - `구입금액을 입력해 주세요.`

#### 2. 사용자가 구매한 로또의 개수정보 출력하는 기능

    - `5개를 구매했습니다.`

#### 3. 사용자가 구매한 로또의 번호를 출력하는 기능

> [8, 21, 23, 41, 42, 43]
>
> [3, 5, 11, 16, 32, 38]
>
> [7, 11, 16, 35, 36, 44]
>
> [1, 8, 11, 31, 41, 42]
>
> [13, 14, 16, 38, 42, 45]

#### 4. 당첨 번호에 대한 입력 안내문을 출력하는 기능

    - `당첨 번호를 입력해 주세요.`

#### 5. 보너스 번호에 대한 입력 안내문을 출력하는 기능

    - `보너스 번호를 입력해 주세요.`

#### 6. 당첨 통계에 대한 정보 출력 기능

    당첨 통계
    ---
    3개 일치 (5,000원) - 1개
    4개 일치 (50,000원) - 0개
    5개 일치 (1,500,000원) - 0개
    5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
    6개 일치 (2,000,000,000원) - 0개
    ```

#### 7. 수익률에 대한 정보 출력 기능

    - `총 수익률은 62.5%입니다.`

#### 8. 입력에 대한 예외 메시지 출력 기능

    - `[ERROR] 빈 값은 허용되지 않습니다.`

---

## 💡 Validation

### ☑️ View의 입력에 대한 검증을 수행하는 계층

- View로부터 입력을 넘겨 받아 값에 대한 <font color="green"><u>유효성을 검증</u></font>한다.
- 구매할 로또의 금액의 경우 '빈 값인지', '문자를 포함하고 있는지', '음수나 0인지' 검사하는 기능
- 당첨 번호의 경우 '빈 값인지' 검사하는 기능
- 보너스 번호의 경우 '빈 값인지', '문자를 포함하고 있는지' 검사하는 기능
- 검증에 실패할 경우 <font color="brown">**IllegalArumentException을 상속받아 만든 명시적인 예외를 던진다.**</font>

---

## 💡Model

### 1. 로또 게임의 번호에 대한 모델

- **로또 1개(번호 6개)에 대한 번호**를 가진다.
- 난수 생성기를 사용해 한 줄(6개)의 로또 번호를 생성하는 기능 (사용자의 로또 번호)
- 당첨 번호를 생성하는 기능
- 당첨 번호를 검증하는 기능
    1. 당첨 번호는 1~45의 범위를 가져야 한다.
    2. 당첨 번호에는 중복된 번호가 없어야 한다.
    3. 당첨 번호는 **6개**의 **숫자**여야 한다.

### 2. 로또 여러장에 대한 일급 컬렉션 모델

- **여러 개의 로또**를 가진다.


- 로또의 개수는 **구매금액**에 의해 결정된다.


- 로또의 번호는 **라이브러리로 제공하는 난수 생성기**에 의해 결정된다.

### 3. 로또 게임의 통계를 담고 있는 모델

- <b>로또 게임의 통계를 플레이어의 번호와, 당첨 번호, 보너스 번호를 통해 계산</b>하여 Map 형태로 필드로 가진다.


- 로또 게임을 “**로또들의 로또번호**”와 “**당첨 로또의 번호** + **보너스 번호**”를 비교하여 점수를 계산하여 리턴하는 기능


- 로또들 중 하나의 로또에 대해 아래의 기능을 수행하는 기능
    - 당첨 번호와 한 줄의 번호를 비교하여 일치하는 값이 몇 개인지 체크하는 기능
    - 한 줄의 번호에 보너스 번호가 포함되어 있는지 체크하는 기능
    - 계산에 의한 결과를 토대로 등수를 결정하여 등수에 대한 정보를 리턴하는 기능
        - 1등을 몇 번 했는지, 2등을 몇번 했는지와 같은 정보를 담아 리턴한다.

### 4. 로또 게임의 수익률을 담고 있는 모델

- <b>로또게임의 통계와 구매금액으로부터 수익율을 계산</b>하여 필드로 가진다.
- 통계로부터 수익율 계산하는 기능

---

## 💡 Constant

- 재사용의 여지가 있는 상수들은 Enum으로 관리한다.

### **1. 에러(예외) 메시지**

- 당첨 로또 번호 입력에서 검증에 실패하여 발생하는 에러에 대한 메시지
- 구매 금액 입력에서 검증에 실패하여 발생하는 에러에 대한 메시지
- 보너스 숫자 입력에서 검증에 실패하여 발생하는 에러에 대한 메시지

### **2. 로또에 대한 기본 정보**

- 하나의 로또에 대한 가격 정보 - 1000
- 로또 번호의 최소 숫자 - 1
- 로또 번호의 최대 숫자 - 45
- 하나의 로또에 대한 번호의 개수 - 6

### **3. 로또에 대한 당첨 정보**

- 일치한 숫자의 개수와 상금, 보너스번호가 포함되어 있는지에 대한 정보
- 1등 : 일치한 숫자의 개수가 6개, 상금 20억원
- 2등 : 일치한 숫자의 개수가 5개 + 보너스번호 일치, 상금 3천만원
- 3등 : 일치한 숫자의 개수가 5개, 상금 150만원
- 4등 : 일치한 숫자의 개수가 4개, 상금 5만원
- 5등 : 일치한 숫자의 개수가 3개, 상금 5천원

---

## 💡Util

### 1. 형태 변환기능 클래스

- 사용자가 입력한 값인 당첨 번호(String)을 List<Integer>로 변환하여 반환하는 기능

### 2. 난수 생성기

- 라이브러리가 제공하는 기능을 통해 1-45사이의 숫자를 6개 뽑는 기능.
- 테스트의 용이함을 위해 인터페이스로 확장하는 전략 패턴을 이용

---

## 💡 DTO (Data Transfer Object)

- Model의 값을 파싱해서 View에게 전달해주는 오브젝트

  ### 1. 로또 하나에 대한 정보를 DTO로 변환하여 반환하는 기능
    - 위 기능을 바탕으로 로또 여러개에 대한 정보를 변환하여 컬렉션 형태로 모아 반환하는 기능

  ### 2. 통계에 대한 정보를 파싱하여 반환하는 기능
    - 1등, 2등, 3등, 4등, 5등을 몇 번했는지에 대한 정보를 리턴하는 기능

---

## 💡 VO(Value-Object)

- 사용자가 입력한 값에 대한 불변 객체로 원시값을 포장한다.

### 1. 보너스 넘버에 대한 정보를 가지고 있는 불변 객체

- 값에 대한 비즈니스 검증 기능
    - 숫자가 45보다 큰 지 검사하는 기능
    - 숫자가 1보다 작은 지 검사하는 기능

### 2. 구매 금액에 대한 정보를 가지고 있는 불변 객체

- 값에 대한 비즈니스 검증 기능
    - 로또 1장의 가격보다 작은 지 검사하는 기능
    - 로또 1장의 가격으로 나누었을 때 나머지가 존재하는지 검사하는 기능

### 3. 구매 금액을 통해 구매한 로또의 개수에 대한 정보를 가지고 있는 불변 객체

- 구매 금액에 대한 유효성 검증과 비즈니스 검증을 통해 생성되는 객체이므로, 별도의 비즈니스 검증은 불필요하다. 고로 구현할 필요가 없다.

---

## 💡 Controller

- 로또게임을 진행하도록 모델에게 지시하고, 진행한 게임의 결과를 받아 파싱하여 결과를 출력하도록 뷰에게 지시한다.


- 컨트롤러에서 뷰를 통해 사용자로부터 정보(구매금액, 당첨번호, 보너스번호)를 받고 모델을 만들어 게임을 진행한다.


- 입력 뷰에게 구매금액을 전달 받는 기능


- 구매금액에 대한 정보를 토대로 티켓을 생성해 게임을 플레이하는 데 사용되는 티켓 수 만큼 로또 번호를 생성하도록 모델에게 지시하는 기능.


- 생성한 티켓 수를 출력하도록 뷰에게 지시하는 기능


- 생성한 번호를 출력하도록 뷰에게 지시하는 기능


- 입력 뷰에게 당첨 번호를 전달 받는 기능


- 입력 뷰에게 보너스 번호를 전달 받는 기능


- 사용자의 로또 번호, 당첨 번호, 보너스 번호로부터 통계 모델을 생성하는 기능


- 통계 모델과 구매 금액 모델로부터 수익율을 계산하는 모델을 생성하는 기능


- 통계 모델과 수익율 모델을 DTO형태로 변환하여 결과를 출력하도록 뷰에게 지시하도록 기능


- 게임을 진행한 결과를 토대로 사용자에게 보여줄 결과를 출력하도록 지시하는 기능
    - 생성한 번호를 모델로부터 받아 DTO형태로 변환하여 출력을 View에게 지시하는 기능
    - 게임 결과(통계, 수익률)에 대한 정보를 모델로부터 받아 DTO형태로 변환하여 출력을 View에게 지시하는 기능
